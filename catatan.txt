GOOGLE TAG MANAGER, ANALITIK, DITAMBAHIN KETIKA UDAH DI PUSH KE PROD

ADD ROLE IN USER TABEL

HARGA EVENT RELATION MANAGER

DISKONNN

BIKIN INFO DETAIL DI PEMBELIAN, Midtrans Log DAN Subscription

php artisan make:model Plan -mfc

php artisan db:seed

php artisan migrate:refresh --seed

php artisan make:filament-user



php artisan shield:setup

php artisan shield:install admin

php artisan shield:generate --all

php artisan shield:super-admin

php artisan make:filament-resource categoryNilai --generate

php artisan make:filament-resource categoryNilai --generate --soft-deletes

php artisan make:filament-relation-manager CategoryResource posts title

CategoryResource is the name of the resource class for the parent model.

posts is the name of the relationship you want to manage.

title is the name of the attribute that will be used to identify posts.

CATATAN : SETIAP TABEL HARUS ADA (
    created at
    updated_at
    deleted at
)
sangnus full Backend

user

Tabel DB
    user
        nama
        email
        password
        image -> nullable
        email_verified_at
        deskripsi -> nullable
        remember_token

    Alamat
        id
        user_id
        alamat
        kabupaten
        provinsi
        kode pos

group pembelian

CREATE TABLE carts (
    id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT,
    item_id INT, -- ID dari item (event, produk)
    item_type ENUM('event', 'produk'), -- Jenis item
    jumlah INT DEFAULT 1,
    harga DECIMAL(10,2),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);


CREATE TABLE orders (
    id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT,
    total_pembelian DECIMAL(10,2), -- Total sebelum diskon
    discount_id BIGINT UNSIGNED NULL, -- ID Diskon yang digunakan
    discount_amount DECIMAL(10,2) DEFAULT 0.00, -- Jumlah diskon yang diterapkan
    total_akhir DECIMAL(10,2) GENERATED ALWAYS AS (total_pembelian - discount_amount) STORED, -- Total setelah diskon
    status_pembelian ENUM(
            'pending',
            'sudah dibayar',
            'kadaluarsa',
            'gagal',
            'dibatalkan',
            'dikembalikan'
        ) DEFAULT 'pending',
    order_id VARCHAR(255) UNIQUE, -- ID dari Midtrans
    metode_pembayaran ENUM('midtrans', 'qris', 'ewallet', 'manual_transfer'),
    transaction_id VARCHAR(255) UNIQUE NULL, -- ID transaksi dari Midtrans
    payment_url TEXT NULL, -- URL pembayaran jika menggunakan Midtrans
    midtrans_response TEXT NULL, -- Simpan response JSON dari Midtrans untuk tracking
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    FOREIGN KEY (discount_id) REFERENCES discounts(id) ON DELETE SET NULL -- Jika diskon dihapus, tetap bisa track ordernya
);




Tabel ini menyimpan informasi utama tentang diskon.
CREATE TABLE discounts (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL, -- Nama diskon
    type ENUM('percentage', 'fixed', 'voucher') NOT NULL, -- Jenis diskon
    amount DECIMAL(10,2) NOT NULL, -- Nilai diskon (persentase atau nominal)
    code VARCHAR(50) UNIQUE NULL, -- Kode voucher (jika ada)
    min_purchase DECIMAL(10,2) DEFAULT NULL, -- Minimal pembelian agar diskon berlaku
    max_discount DECIMAL(10,2) DEFAULT NULL, -- Batas maksimum diskon untuk diskon persentase
    start_date DATETIME NOT NULL, -- Mulai berlaku
    end_date DATETIME NOT NULL, -- Batas waktu diskon
    usage_limit INT DEFAULT NULL, -- Batas pemakaian (NULL = tidak terbatas)
    usage_count INT DEFAULT 0, -- Jumlah penggunaan
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);




Tabel ini menyimpan siapa saja yang sudah menggunakan diskon tertentu.
CREATE TABLE discount_user (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    discount_id BIGINT UNSIGNED NOT NULL,
    user_id BIGINT UNSIGNED NOT NULL,
    used_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (discount_id) REFERENCES discounts(id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);




Jika diskon hanya berlaku untuk produk tertentu, bisa menggunakan tabel ini.
CREATE TABLE discount_event (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    discount_id BIGINT UNSIGNED NOT NULL,
    event_id BIGINT UNSIGNED NOT NULL,
    FOREIGN KEY (discount_id) REFERENCES discounts(id) ON DELETE CASCADE,
    FOREIGN KEY (event_id) REFERENCES products(id) ON DELETE CASCADE
);


CREATE TABLE midtrans_logs (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    transaction_id VARCHAR(255),
    order_id VARCHAR(255),
    status_code VARCHAR(10),
    gross_amount DECIMAL(15,2),
    payment_type VARCHAR(50),
    transaction_status ENUM('pending', 'settlement', 'deny', 'expire', 'cancel', 'refund', 'partial_refund', 'chargeback'),
    fraud_status ENUM('accept', 'deny', 'challenge') DEFAULT 'accept',
    midtrans_response TEXT, -- Simpan response JSON dari webhook
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

artikel => semua orang bisa posting, nanti di moderasi oleh admin website


Tabel DB
    kategori artikel
        id
        slug
        image => nullable
        nama => nullable
        deksripsi => nullable

    artikel
        id
        title
        slug
        views
        user_id
        kategori_id
        image => nullable
        excerpt
        keyword
        content
        status_artikel => draft, publish, premium
        published_at
        created at
        updated_at
        deleted at


event => konek ke payment gateaway (Midtrans)

Tabel DB
    kategori event
        id
        nama
        slug

    harga event
        id
        event_id
        nama
        harga

    event
        kategori_event_id
        nama
        slug
        image
        status_artikel => draft, publish, premium
        keyword
        excerpt
        deskripsi
        tempat
        tanggal
        link_gmap
        created_at
        updated_at
        deleted_at

    pembelian event
        event_id
        orders_id
        jumlah_tiket
        jenis_tiket
        nama
        harga
        tanggal


Subscription

50k
99k
199k

CREATE TABLE plans (
    id INT PRIMARY KEY AUTO_INCREMENT,
    nama VARCHAR(255),
    harga DECIMAL(10,2), -- Harga per bulan/tahun
    durasi ENUM('30', '90', '365'), -- Durasi dalam hari (misal: 30 hari, 90 hari, 365 hari)
    deskripsi
    fitur TEXT, -- JSON berisi daftar fitur yang tersedia. misal ["akses_video", "tanpa_iklan", "unduh_materi", "peta_interaktif_full"]
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);


CREATE TABLE subscriptions (
    id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT,
    plan_id INT,
    status ENUM('aktif', 'expired', 'cancelled') DEFAULT 'aktif',
    tanggal_mulai TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    tanggal_berakhir TIMESTAMP,
    transaction_id VARCHAR(255) NULL, -- ID dari Midtrans atau payment gateway
    payment_status ENUM('pending', 'paid', 'failed', 'refunded') DEFAULT 'pending', -- Status pembayaran
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    FOREIGN KEY (plan_id) REFERENCES plans(id) ON DELETE CASCADE
);





produk (E-Commerce) => konek ke payment gateaway (Midtrans)

Tabel DB
    produk
    pembayaran produk
    pembelian produk
    riwayat pembelian produk

kontak
Tabel DB
    kontak
        id
        email
        pesan

Group Ragam Indonesia (PETA INTERAKTIF AMBIL NAMA, GAMBAR, ASAL, LAT, LNG)

    Lagu Daerah (Modal)
        nama
        pencipta
        tahun_diciptakan
        asal_lagu
        image
        audio (file mp3)
        video
        kategori ENUM('tradisional', 'modern')
        lirik
        sejarah
        lat
        lng

    Alat Musik (Modal)
        nama
        asal
        image
        cara_main ENUM('dipetik', 'ditiup', 'dipukul', 'digesek')
        audio (file mp3)
        video
        excerpt
        deskripsi
        lat
        lng


    Rumah Adat (Detail)
        nama: string;
        user_id
        asal_rumah: string;
        image: string;
        excerpt
        deskripsi
        lat
        lng

    Makanan Khas (Detail)
        nama: string;
        user_id
        asal_makanan: string;
        image: string;
        bahan_utama
        deskripsi
        lat
        lng







"@tailwindcss/vite": "^4.0.0",
        "@vitejs/plugin-react": "^4.3.4",
        "axios": "^1.7.4",
        "concurrently": "^9.0.1",
        "laravel-vite-plugin": "^1.2.0",
        "tailwindcss": "^4.0.0",
        "vite": "^6.0.11",





public function show($slug)
    {
        $headers = [
            'Content-Type' => 'application/json',
            'X-Powered-By' => 'Rifki Romadhan',
            'X-Content-Language' => 'id',
            'Access-Control-Allow-Origin' => '*',
            'Access-Control-Allow-Headers' => 'Content-Type, Authorization',
        ];

        try {

            $artikel = Artikel::where([
                ["slug", $slug],
                ["status_artikel", '!=', "draft"]
            ])
            ->withoutTrashed()
            ->with("komentar", "kategori:id,nama", "user:id,name")->firstOrFail();

            if (empty($artikel)) {
                throw new \Exception("Artikel tidak ditemukan.");
            }

            $newViews = $artikel->views + 1;
            $artikel->update([
                "views" => $newViews
            ]);

            return response()->json([
                "success" => true,
                "data" => $artikel,
                "message" => "Artikel ".$slug." Berhasil di Tampilkan"
            ], 200, $headers);

        } catch (\Exception $e) {

            return response()->json([
                "success" => false,
                "data" => null,
                "message" => "Error: " . $e->getMessage()
            ], 500, $headers);

        }

    }





{
    "private": true,
    "type": "module",
    "scripts": {
        "build": "vite build",
        "dev": "vite"
    },
    "devDependencies": {
        "@tailwindcss/vite": "^4.0.0",
        "@vitejs/plugin-react": "^4.3.4",
        "axios": "^1.7.4",
        "concurrently": "^9.0.1",
        "laravel-vite-plugin": "^1.2.0",
        "tailwindcss": "^4.0.0",
        "vite": "^6.0.11"
    },
    "dependencies": {
        "@inertiajs/react": "^2.0.3",
        "react": "^19.0.0",
        "react-dom": "^19.0.0"
    }
}



































{
    "private": true,
    "type": "module",
    "scripts": {
        "build": "vite build",
        "dev": "vite"
    },
    "devDependencies": {
        "@tailwindcss/vite": "^4.0.0",
        "@vitejs/plugin-react": "^4.3.4",
        "autoprefixer": "^10.4.16",
        "axios": "^1.7.4",
        "concurrently": "^9.0.1",
        "laravel-vite-plugin": "^1.2.0",
        "postcss": "^8.4.31",
        "tailwindcss": "^4.0.0",
        "vite": "^6.0.11"
    },
    "dependencies": {
        "@emotion/react": "^11.11.1",
        "@emotion/styled": "^11.11.0",
        "@inertiajs/react": "^2.0.3",
        "@mui/material": "^5.14.18",
        "@react-google-maps/api": "^2.19.2",
        "@vis.gl/react-google-maps": "^0.4.3",
        "aos": "^3.0.0-beta.6",
        "i18next": "^23.15.1",
        "i18next-browser-languagedetector": "^8.0.0",
        "react": "^19.0.0",
        "react-card-slider-component": "^1.0.9",
        "react-dom": "^19.0.0",
        "react-i18next": "^15.0.2",
        "react-icons": "^4.12.0",
        "react-light-accordion": "^0.1.4",
        "yet-another-react-lightbox": "^3.15.2"
    }
}


